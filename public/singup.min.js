// @ts-nocheck
const supabase=window.supabase;document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("createAccountBtn");e&&e.addEventListener("click",(async e=>{e.preventDefault();const r=document.getElementById("fullname")?.value.trim(),t=document.getElementById("email")?.value.trim(),a=document.getElementById("phone")?.value.trim(),n=document.getElementById("password")?.value,i=document.getElementById("confirm-password")?.value;if(!(r&&t&&a&&n&&i))return void alert("Semua kolom wajib diisi!");if(n!==i)return void alert("Password & konfirmasi tidak sama.");const{data:o,error:s}=await supabase.auth.signUp({email:t,password:n});if(s)return console.error("Signup error:",s),void alert("Signup error: "+s.message);const d=o.user;if(!d)return void alert("Sign Up gagal, user tidak terbaca.");const{error:l}=await supabase.from("profiles").insert({id:d.id,full_name:r,is_admin:!1});if(l)return console.error("Profile insert error:",l),void alert("Profile error: "+l.message);alert("Akun berhasil dibuat ðŸŽ‰ Silakan login!"),window.location.href="singin.html"}))}));