// @ts-nocheck
const supabase=window.supabase;document.addEventListener("DOMContentLoaded",(async()=>{document.getElementById("resetBtn").addEventListener("click",(async()=>{const e=document.getElementById("new-password")?.value||"",a=document.getElementById("confirm-password")?.value||"";if(e&&a)if(e===a)try{const{data:a,error:s}=await supabase.auth.getSession();if(s||!a.session)return console.error("No reset session:",s),void alert("Link reset sudah tidak berlaku atau session tidak ditemukan.\nCoba klik ulang link dari email.");const{data:r,error:t}=await supabase.auth.updateUser({password:e});if(t)return console.error("Update password error:",t),void alert("Gagal mengubah password: "+t.message);alert("Password berhasil diubah! Silakan login dengan password baru."),window.location.href="singin.html"}catch(e){console.error("Unexpected reset error:",e),alert("Terjadi error saat reset password.")}else alert("Password dan konfirmasi tidak sama.");else alert("Isi kedua kolom password dulu ya ðŸ™‚")}))}));