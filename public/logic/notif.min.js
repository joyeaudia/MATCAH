// @ts-nocheck
!function(){"use strict";function t(){return"notifications_v1_"+(localStorage.getItem("maziUID")||"guest")}function n(){try{const n=JSON.parse(localStorage.getItem(t())||"[]"),e=JSON.parse(localStorage.getItem("notifications_v1")||"[]");if(!Array.isArray(e)||!e.length)return Array.isArray(n)?n:[];const i=Array.isArray(n)?n.slice():[],r=new Set(i.map((t=>String(t.id||""))));return e.forEach((t=>{if(!t)return;const n=String(t.id||"");r.has(n)||(r.add(n),i.push(t))})),i}catch(t){return[]}}function e(n){try{localStorage.setItem(t(),JSON.stringify(n||[]))}catch(t){console.error("Failed to save notifications",t)}}function i(t){return String(t||"").replace(/[&<>"']/g,(t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t])))}function r(){const t=document.getElementById("notif-list"),e=document.getElementById("notif-empty");if(!t||!e)return;const r=n();t.innerHTML="",Array.isArray(r)&&r.length?(e.hidden=!0,r.forEach((n=>{const e=document.createElement("article");e.className="notif-card",e.dataset.id=n.id,e.innerHTML=`\n        <div class="notif-card-header">\n          <div class="notif-card-title">\n            <span class="notif-card-emoji">${n.emoji||""}</span>\n            ${i(n.title||"")}\n          </div>\n          <div class="notif-card-time">${i(n.time||"")}</div>\n        </div>\n        <div class="notif-card-body">\n          ${i(n.message||"")}\n        </div>\n      `,t.appendChild(e)}))):e.hidden=!1}document.addEventListener("DOMContentLoaded",(function(){r(),function(){const i=n();if(!Array.isArray(i)||!i.length)return;let r=!1;const a=i.map((t=>t.isRead?t:(r=!0,Object.assign({},t,{isRead:!0}))));if(r){e(a);try{window.dispatchEvent(new StorageEvent("storage",{key:t(),newValue:JSON.stringify(a)}))}catch(t){}}}();const i=document.getElementById("btn-back"),a=document.getElementById("btn-clear");i&&i.addEventListener("click",(function(){window.history.length>1?window.history.back():window.location.href="order.html"})),a&&a.addEventListener("click",(function(){confirm("Clear all notifications?")&&(e([]),r())}))}))}();