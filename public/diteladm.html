<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin — Delivery Tracking</title>
  <link rel="stylesheet" href="ordadm.css">
</head>
<body>
  <div class="admin-shell">
    <header class="admin-header">
      <h1>Admin — Delivery Tracking</h1>
      <p class="subtitle">Atur status pengiriman, jadwal, dan biaya kirim.</p>
    </header>

    <main id="admin-detail" class="admin-content">
      <section class="admin-order-card" id="adm-summary-card">
        <div class="admin-order-header">
          <div class="admin-order-id">Order ID: <span id="adm-order-id">Loading...</span></div>
          <div class="admin-order-created" id="adm-order-date"></div>
        </div>
        <div class="admin-status-row">
          <span class="badge badge-status">Status: <span id="adm-status-text">-</span></span>
          <span class="badge badge-payment" id="adm-payment-badge">Payment: -</span>
          <span class="badge" id="adm-total-badge">Total: Rp 0</span>
        </div>
        <div class="admin-items" id="adm-items"></div>
        <div class="admin-address" id="adm-address-block"></div>
      </section>

      <section class="admin-detail-section">
        <h2 class="admin-section-title">Delivery Settings</h2>
        <div class="admin-form-row">
          <label>Scheduled Delivery</label>
          <input type="date" id="adm-scheduled">
        </div>
        <div class="admin-form-row">
            <label>Shipping Fee (Rp)</label>
            <input type="number" id="adm-ship-fee" placeholder="0">
        </div>
      </section>

      <section class="admin-detail-section">
        <h2 class="admin-section-title">Update Status</h2>
        
        <div class="admin-form-row">
            <label>Current Status</label>
            <select id="status-select" style="padding:8px; border-radius:8px; border:1px solid #ccc; flex:1;">
                <option value="active">Active (Order Placed)</option>
                <option value="processing">Processing (Preparing)</option>
                <option value="delivery">Out for Delivery</option>
                <option value="delivered">Delivered (Selesai)</option>
                <option value="cancelled">Cancelled</option>
            </select>
        </div>

        <div class="admin-form-row">
            <label>Payment Status</label>
            <select id="payment-select" style="padding:8px; border-radius:8px; border:1px solid #ccc; flex:1;">
                <option value="pending">Pending</option>
                <option value="paid">Paid</option>
                <option value="rejected">Rejected</option>
            </select>
        </div>

        <div class="admin-actions" style="margin-top:20px;">
          <button class="btn btn-details" id="btn-save">Save Changes</button>
          <button class="btn btn-approve" id="btn-mark-done">Mark Complete & Paid</button>
          <button class="btn btn-reject" onclick="window.location.href='ordadm.html'">Back</button>
        </div>
      </section>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <script>
    // SERVICE ROLE KEY (Kunci Admin - agar bisa update data user lain)
    const SUPABASE_URL = 'https://ebbdaxprudznktnfvcbo.supabase.co';
    const SUPABASE_SERVICE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViYmRheHBydWR6bmt0bmZ2Y2JvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NDU3MjQ0NCwiZXhwIjoyMDgwMTQ4NDQ0fQ.Del6yhwSj8vQSPFONlvQnzPTLmFFTB-QO31_XJKUHus';

    try {
      window.supabase = supabase.createClient(SUPABASE_URL, SUPABASE_SERVICE_KEY);
    } catch (e) {
      console.error("Supabase Admin Init Failed", e);
    }
  </script>

  <script src="diteladm.js"></script>
</body>
</html>