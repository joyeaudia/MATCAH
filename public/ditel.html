<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Order Details — Verent</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Rasa:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../style/ditel.css" /> 
</head>
<body>
  <div class="screen">
    
    <header class="appbar" role="banner">
      <div class="appbar-inner">
        <div class="brand-center">
          <img src="../logos/lg3.png" alt="Verent" class="brand-logo">
        </div>
        <button id="back-btn" class="back-btn" aria-label="Back">
          &lt;= Back
        </button>
        <button class="icon-bell" aria-label="Notifications" type="button">
          <img src="../acs/lcng.png" alt="Notifications">
        </button>
      </div>
    </header>

    <main class="content">
      
      <section class="card order-card">
        <h2>Order #<span id="detail-order-id">Loading...</span></h2>
        
        <span class="status-pill" id="detail-status-pill">Loading Status...</span>
        
        <div class="meta">
            <div style="display:flex;justify-content:space-between;">
                <span class="muted">Date:</span>
                <span id="detail-order-date">-</span>
            </div>
            <div style="display:flex;justify-content:space-between; margin-top:4px;">
                <span class="muted">Scheduled:</span>
                <span id="detail-scheduled">-</span>
            </div>
        </div>

        <div class="order-items" id="detail-items">
           <div class="skeleton-line" style="width: 80%; height: 20px; margin-bottom: 10px; background:#eee;"></div>
           <div class="skeleton-line" style="width: 100%; height: 20px; margin-bottom: 10px; background:#eee;"></div>
        </div>
      </section>

      <section class="card detail-shipping-card">
        <h3>Alamat Kirim</h3>
        <p id="detail-address" style="color: #555; line-height: 1.5; white-space: pre-line;">
          Loading address...
        </p>
      </section>

      <section class="card detail-summary-card">
        <h3>Ringkasan</h3>
        <div id="detail-summary">
            <div style="display:flex;justify-content:space-between; margin-bottom:5px;">
                <span>Loading...</span><span>Rp 0</span>
            </div>
        </div>

        <div class="payment-note" id="payment-note" style="margin-top: 15px; padding-top:10px; border-top:1px dashed #ddd;">
          Metode: <span id="detail-payment-method" style="font-weight:bold;">-</span>
        </div>
      </section>

      <aside class="card detail-tracking-card">
        <h3>Tracking</h3>
        <table class="tracking">
            <tr>
                <td>Order Placed</td>
                <td id="track-placed" class="status done">Completed</td>
            </tr>
            <tr>
                <td>Payment</td>
                <td id="track-payment" class="status not">Pending</td>
            </tr>
            <tr>
                <td>Processing</td>
                <td id="track-prep" class="status not">...</td>
            </tr>
            <tr>
                <td>Delivery</td>
                <td id="track-out" class="status not">...</td>
            </tr>
             <tr>
                <td>Delivered</td>
                <td id="track-delivered" class="status not">...</td>
            </tr>
        </table>

        <div class="help-links" style="margin-top:20px;">
          <div style="display:flex; gap:10px;">
             <button id="detail-cancel-btn" class="cancel" style="display:none;">Cancel Order</button>
             <a href="#" id="wa-btn" class="wa-btn" target="_blank">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" width="24" height="24"> Chat Admin
             </a>
          </div>
        </div>
      </aside>
    </main>

    <footer class="mobile-footer">
      <div class="small-note">© Verent</div>
    </footer>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = 'https://ebbdaxprudznktnfvcbo.supabase.co'; 
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViYmRheHBydWR6bmt0bmZ2Y2JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1NzI0NDQsImV4cCI6MjA4MDE0ODQ0NH0.U0AhNyTzU5nht8iMk7cYs2nSwApY1IssN4oMW1EChZg'; 

    try {
      window.supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    } catch (e) {
      console.error("Supabase init failed:", e);
    }
  </script>

  <script src="../logic/ditel.js"></script> 
</body>
</html>